<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Capability URLs Best Practice</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Saturday February 24, 2024.</div>
    <h1 class="topic-title">Capability URLs Best Practice</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1813_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">torgo</div>
          <div class="creation_date">2014-06-13</div>
          <div class="post_content">
<p>or: “You won’t believe what happened when this Capability URL was clicked!”</p>
<p>The TAG is <a href="http://www.w3.org/blog/TAG/2014/05/22/capability-urls-feedback/">seeking feedback</a> on a document that describes common use, best practices for and risks associated with so-called capability URLs. The idea is to publish these as a TAG finding which would hopefully be useful to web application architects and designers seeking to incorporate this pattern into whatever they’re building.</p>
<p>A capability URL is a URL that combines location with access privileges. For example, in web applications this design pattern is often used for password resets, polls or sharing of otherwise private information without the need for additional credentials.</p>
<p>The document is not intended to discourage the use of this pattern. Rather, we’re trying to educate the community about some of the risks associated with capability URLs and encourage adoption of best practices.</p>
<p>Any feedback greatly appreciated.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1671_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">robin</div>
          <div class="creation_date">2014-06-16</div>
          <div class="post_content">
<p>Just a few thoughts:</p>
<p>I think the thing that is most wrong with this document is its name. Advice is only useful if it’s heeded, and in order to be heeded it first needs to be read. I’ve used these URLs many times, but I’ve never seen them called that. To be fair, I don’t recall seeing them called anything in particular, but “capability URL” certainly doesn’t ring true. If I didn’t know you folks, I’d never have read that. One-Shot URL? Secret URL?</p>
<p>In general I would say that while the content of the document is sensible, this same tendency to write it as if it were by experienced architects for experienced architects seems to pervade throughout. I would think that the primary audience would be the busy hacker who needs to be on top of security issues and good practices but doesn’t have time to understand why in the name of Eris does Second Life (“Wait, that’s still a thing?”) have some weird-arse capability-based API.</p>
<p>This is visible in “4.4 Web Architecture” too. Be careful! “Good practice: Avoiding URI aliases”! But the section concludes saying that in this case it’s actually okay. Maybe that’s a reason to update the discussion in AWWW, but it need not be mentioned here. I don’t think that the group of people this should be written for knows that the AWWW exists.</p>
<p>Likewise, the <code>replaceState()</code> discussion sounds like the hack from hell, and it’s not clear why it’s there.</p>
<p>As a result of being too architectural, I think this document mixes up what are in fact two distinct practices. One is secret URLs (like secret gists) and the other is one-shot URLs (email confirmation, password reset, etc.). Sure enough they look the same, but their uses are IMHO different enough that they warrant being treated separately.</p>
<p>With secret URLs you need to:</p>
<ul>
<li>Warn your users about the level of security they are really getting</li>
<li>Preferably provide a list of “last accesses” so that compromises can be detected</li>
<li>Make them easy to revoke</li>
<li>301 to the public/canonical URL if they stop being secret</li>
</ul>
<p>With one-shot URLs you need to:</p>
<ul>
<li>Revoke them immediately (and expire within days)</li>
<li>Always 301 to make sure they can never be bookmarked or whatnot</li>
</ul>
<p>On a final note, I’ve always wondered why no one ever used HTTP URLs’ ability to embed credentials. Those don’t leak through Referer. Unless I’ve missed something, it might be a nice trick.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2501_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">stuartpb</div>
          <div class="creation_date">2015-07-20</div>
          <div class="post_content">
<p>I love this idea, but I feel like this kind of document is more the kind of thing that <a href="https://www.webplatform.org">https://www.webplatform.org</a> was founded to collect, right? If it’s aimed at site / app developers and doesn’t require any changes to browsers, then it’s out-of-scope for the W3C, I feel.</p>
<p>EDIT: Oh, that’s what <a href="http://www.w3.org/2001/tag/">the TAG</a> is. I’d never heard of them until right now. Is there a Community Group version of the TAG (something like the WICG)? Can there be? (Again - can this be something that gathers on <a href="http://webplatform.org">webplatform.org</a>? Say, we start a new Discourse over there?)</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
