<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Geolocation Client Hint</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Thursday February 08, 2024.</div>
    <h1 class="topic-title">Geolocation Client Hint</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">lbargu</div>
          <div class="creation_date">2017-10-26</div>
          <div class="post_content">
<p>Hi,</p>
<p>I would like to discuss with this group a proposal to solve the following use case:</p>
<p>Currently, the only mechanism to share your geolocation with a website is through the JS Geolocation API. This means that in order to have the server know the client’s location there are two full roundtrips required (one roundtrip to load the page with Javascript code, and a second roundtrip to actually send the location to the server and get back a location-aware response).</p>
<p>For example, for services like Search, it means that the very first response from a server will contain non-localized results, and a second roundtrip would be required to refresh those results (assuming Geolocation permission is already granted for the origin).</p>
<p>It looks like <a href="http://httpwg.org/http-extensions/client-hints.html" rel="nofollow noopener">Client Hints (CH)</a> would be a great mechanism to solve this use case, so I started a draft trying to explain how a CH-extension could look like. You can find it here: <a href="https://github.com/luisbargu/geolocation-client-hint" rel="nofollow noopener">https://github.com/luisbargu/geolocation-client-hint</a></p>
<p>It would be great to get your opinion on this, and whether this is something that might be interesting for people in this group.</p>
<p>Thanks!
Luis</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1159_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">matthewp</div>
          <div class="creation_date">2017-11-02</div>
          <div class="post_content">
<p>I like this idea. Just want to reiterate what is said in the spec, that permission should be first granted through the JS Geolocation API; meaning that the browser shouldn’t prompt the user on its own.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">lbargu</div>
          <div class="creation_date">2017-12-28</div>
          <div class="post_content">
<p>I have been working on a more detailed <a href="https://github.com/luisbargu/geolocation-client-hint" rel="nofollow noopener">spec for a Geolocation Client Hint</a>. Preview <a href="https://htmlpreview.github.io/?https://github.com/luisbargu/geolocation-client-hint/blob/master/index.html" rel="nofollow noopener">here</a>.</p>
<p>In the introduction, I added some client/server flows which hopefully make clear that the permission should be first granted through the JS Geolocation API (as <span class="mention">@matthewp</span> mentioned). It also highlights what the current problem is, and how/why this proposal would improve the situation.</p>
<p>If anyone else is interested in this idea, please let me know.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
