<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Need loadstart event on &lt;picture&gt; src change</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Thursday February 08, 2024.</div>
    <h1 class="topic-title">Need loadstart event on &lt;picture&gt; src change</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/674_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lletnek</div>
          <div class="creation_date">2015-07-28</div>
          <div class="post_content">
<p>When using  with multiple sources, I’m changing images based on viewport width. However, because CSS kicks in straight away, and the image doesn’t until it has loaded, I’m left with a smaller image blown up too big, or the bigger image scaled down too small. Especially an issue when this occurs during orientation change on devices.</p>
<p>Would be great to have the loadstart event implemented for when the source changes on an image, or something like change event. Then you can trigger different CSS to hide the image while it’s loading in. If cached, then instant and not really an issue.</p>
<p>As discussed with <span class="mention">@yoavweiss</span> <a href="https://twitter.com/Lletnek/status/626102004251758592" rel="nofollow noopener">https://twitter.com/Lletnek/status/626102004251758592</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1832_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Shane</div>
          <div class="creation_date">2015-07-28</div>
          <div class="post_content">
<p>I support this, Tom and I were trying to work out a way to hide the image when it changes and could only come up with very unclean hacky attempts. It is surely a very common use case, essentially lazy-loading for responsive images.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/95_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Wilto</div>
          <div class="creation_date">2015-07-28</div>
          <div class="post_content">
<p>Makes good sense to me. The best way to get this underway would be to submit a PR against our <a href="https://github.com/responsiveimagescg/ri-usecases">Use Cases and Requirements document repo</a>—that gives everybody a place for continued discussion <em>and</em> a convenient “make this a formal use case” button.</p>
<p>That work for everyone?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1710_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">yoavweiss</div>
          <div class="creation_date">2015-07-28</div>
          <div class="post_content">
<p>With my RICG hat on: what <span class="mention">@Wilto</span> said</p>
<p>With my WICG hat on: please join the RICG and sign the CLA before contributing <img alt=":smile:" class="emoji" src="//discourse.wicg.io/images/emoji/twitter/smile.png?v=5" title=":smile:"/></p>
<p>And with my Blink contributor hat on: I don’t think it would be extremely hard to add this, but we need to create a solid case for it.</p>
<p><span class="mention">@marcosc</span> - opinions from Mozilla are welcome <img alt=":smiley:" class="emoji" src="//discourse.wicg.io/images/emoji/twitter/smiley.png?v=5" title=":smiley:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/674_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lletnek</div>
          <div class="creation_date">2015-07-28</div>
          <div class="post_content">
<p>Cheers all, good stuff! Just submitted PR. Hope that’s alright <img alt=":smile:" class="emoji" src="//discourse.wicg.io/images/emoji/twitter/smile.png?v=5" title=":smile:"/></p>
<p>Also joined RICG and signed CLA! <img alt=":thumbsup:" class="emoji" src="//discourse.wicg.io/images/emoji/twitter/thumbsup.png?v=5" title=":thumbsup:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2501_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">stuartpb</div>
          <div class="creation_date">2015-07-29</div>
          <div class="post_content">
<p>While we’re talking about image-based elements and loading events, what’s the deal with the <code>load</code> event on <code>&lt;img&gt;</code>? It’s totally sporadic and unreliable (at least in Chrome), and I can’t find anything on the Web that explains why it’s like that (apart from saying it’s sporadic and unreliable). It seems like it’s definitely in need of a new and/or revamped spec.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1710_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">yoavweiss</div>
          <div class="creation_date">2015-07-29</div>
          <div class="post_content">
<p><span class="mention">@stuartpb</span> sporadic and unreliable in what way? Please open <a href="http://crbug.com">an issue</a> with a test case demonstrating the problems you see.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2501_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">stuartpb</div>
          <div class="creation_date">2015-07-29</div>
          <div class="post_content">
<p>It’s a cross-browser issue, some of which is inherent to the spec (and some which is solved by yet-unimplemented spec behaviors): if the image is presented from the cache, the <code>load</code> event <em>might</em> fire, or might <em>not</em> fire (I guess the “might” is for when the browser presents a cached version and then replaces it with a new response?). The only thing you can do is check the <code>complete</code> property of the element when the page loads, treat the image as if it’s ready if it’s <code>true</code>, and then just debounce or re-evaluate the image if the <code>load</code> event fires and the image was already completed.</p>
<p>What this model is missing is something like a <code>done</code> event that fires if and when the browser decides that the <code>load</code> event <em>will not fire</em> for the image (specifically, if it got a response like a 304 when requesting the image).</p>
<p>There appears to be <a href="https://bugs.webkit.org/show_bug.cgi?id=76102" rel="nofollow noopener">some discussion</a> about extending <code>&lt;img&gt;</code> with Progress events, akin to XHR, but <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element">the spec for the <code>&lt;img&gt;</code> element</a> doesn’t really seem to match the behavior I’m observing (particularly the tendency for the image to be <code>complete</code> but still fire <code>load</code>).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2501_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">stuartpb</div>
          <div class="creation_date">2015-07-29</div>
          <div class="post_content">
<p>Actually, the <code>load</code> event not firing if the image comes from the cache isn’t part of the spec, now that I look at it, so I probably should look at the bugs in Blink.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1710_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">yoavweiss</div>
          <div class="creation_date">2015-07-29</div>
          <div class="post_content">
<p>A set of tests cases to explain the behavior you run into would be ideal <img alt=":smile:" class="emoji" src="//discourse.wicg.io/images/emoji/twitter/smile.png?v=5" title=":smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/677_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Nephyrin</div>
          <div class="creation_date">2015-07-29</div>
          <div class="post_content">
<p>Firing loadstart makes sense to me – and in gecko, at least, would be fairly trivial</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
