<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>[Proposal] CSS &ldquo;toggle&rdquo; Pseudo Class</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Saturday February 24, 2024.</div>
    <h1 class="topic-title">[Proposal] CSS &ldquo;toggle&rdquo; Pseudo Class</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1706_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">textmonster404</div>
          <div class="creation_date">2018-05-27</div>
          <div class="post_content">
<p>Currently it seems that isn’t possible to toggle property(s) in CSS.
I want to be able to click on this sidebar thing and have it toggle between open and closed.</p>
<pre><code class="lang-auto">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;Some Page...&lt;/title&gt;
&lt;style&gt;
.thing {
  position:absolute;
  transform:rotate(90deg);
  transform-origin:0% 0%;
  left:6px;
  top:26px;
  border:3px solid #339955;
  background-color:#66CC88;
  width:200px;
  cursor:pointer;
  transition: left 1s;
}
.thing:active {
  left:26px;
}
.top {
  position:relative;
  border:3px solid #335599;
  background-color:#6688CC;
  width: calc(100% + 10px);
  left:-8px;
  top:-8px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="top"&gt;Top Thing&lt;/div&gt;
&lt;div class="thing"&gt;Side Thing&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>That code in action: <a href="https://www.w3schools.com/code/tryit.asp?filename=FRQAB0QBSE04" rel="nofollow noopener">https://www.w3schools.com/code/tryit.asp?filename=FRQAB0QBSE04</a></p>
<p>If this becomes a reality, this could have some really useful applications. (like the one above)</p>
<pre><code class="lang-css">.thing:toggle {left:26px;}
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3066_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">jhpratt</div>
          <div class="creation_date">2018-05-27</div>
          <div class="post_content">
<p>CSS doesn’t have the ability to permanently change based on events. That’s what JavaScript is for. Something like the example you provided is doable in a few lines of JS at most.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1818_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">briankardell</div>
          <div class="creation_date">2018-05-27</div>
          <div class="post_content">
<p>I recall <span class="mention">@tabatkins</span> had a toggle idea long ago  <a href="http://tabatkins.github.io/specs/css-toggle-states/">http://tabatkins.github.io/specs/css-toggle-states/</a> … Don’t recall what ever happened to it…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-05-28</div>
          <div class="post_content">
<p>I think a toggle state handled via CSS would be pretty amazing. Right now it’s <em>possible</em> but with a lot of wonky complex hacks. Right now it is only really easy to do with JavaScript. But, with mobile being super important we know the less scripting all around to send and run the better. One great example of a toggle system like what Tab has mocked up is the ability to do a hidden navigation drawer on mobile cleanly with only CSS.</p>
<p>I think making as much layout as we can use the least amount of JS possible the better. So I’d love to see some more exploration in this area.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1818_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">briankardell</div>
          <div class="creation_date">2018-05-31</div>
          <div class="post_content">
<p>I think it would likely only be a part of a good drawer (in otherwords, probably still wouldn’t be css only) since in order for it to be accessible I think you’d have more to do… but yeah, it would be interesting.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-05-31</div>
          <div class="post_content">
<p>Well, in combo with the <a href="https://github.com/WICG/inert/issues/69#issue-260730410" rel="nofollow noopener">Edge team’s idea</a> that the inert attribute could also be implemented as a CSS property to toggle the same effect. That would provide a powerful CSS only combo for many various parts of a great UX.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3850_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Malvoz</div>
          <div class="creation_date">2018-06-08</div>
          <div class="post_content">
<p>We can already close dialogs with <code>&lt;form method=dialog&gt;</code> but no <a href="https://github.com/whatwg/html/issues/3567" rel="nofollow noopener">way to open dialogs</a> without JS.</p>
<p><s>This feature would help solving that</s> … we’re not toggling html attributes here… however I wonder: how would CSS toggles provide feedback on open/closed (etc.) states to screen readers?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-06-08</div>
          <div class="post_content">
<p>I’d expect for external tools taking advantage of the Accessibility Tree that the state would be observed, on modification do a check on what needs to be updated. Just like how a <code>visibility</code> change affects a11y tree.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3850_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Malvoz</div>
          <div class="creation_date">2018-06-08</div>
          <div class="post_content">
<p><span class="mention">@Garbee</span></p>
<p>I have concerns that a CSS toggle would merely provide status feedback of the togglable element’s visibility and not e.g. a controlling element (<code>aria-controls="menu"</code>).</p>
<p>For e.g. you mention a css-only mobile drawer scenario. Currently one could convey a menu button as controlling an expandible element by setting <code>aria-expanded="false"</code> and <code>aria-haspopup="true"</code> to a <code>&lt;button&gt;</code>. Would a CSS property be able to convey such infomation?</p>
<p>Maybe <a href="https://drafts.csswg.org/css-ui/#keyboard" rel="nofollow noopener">https://drafts.csswg.org/css-ui/#keyboard</a> could be extended to allow for such controls.</p>
<p>I did throw in a quick proposal in the discussion I linked to in my earlier reply for a <code>&lt;button type="toggle"&gt;</code> attribute. Which in addition would take a <code>toggle="{open|hidden}</code> attribute with 2 values to toggle the controlled element between (using <code>for="controlledElement"</code>). This would allow for easier ARIA-mappings of roles/states.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-06-08</div>
          <div class="post_content">
<p>I’m not saying that a CSS only drawer would be perfect in terms of a11y. It would however be great to have it function well, and let the JS focus more on the a11y improvements to help in other areas.</p>
<p>CSS alone can’t control everything, but if we can get the baseline of support there which helps make things more accessible w/o JS. Then JS can pop in when available to make the experience even better.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3804_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">simevidas</div>
          <div class="creation_date">2018-06-12</div>
          <div class="post_content">
<aside class="quote no-group" data-post="1" data-topic="2807">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="//discourse.wicg.io/user_avatar/discourse.wicg.io/textmonster404/40/1706_1.png" width="20"/> textmonster404:</div>
<blockquote>
<p>Currently it seems that isn’t possible to toggle property(s) in CSS. I want to be able to click on this sidebar thing and have it toggle between open and closed.</p>
</blockquote>
</aside>
<p>That sounds like the <code>&lt;details&gt;</code> element. You can even style the <em>open</em> state via the <code>[open]</code> attribute selector.</p>
<h2><strong><a href="https://jsbin.com/bezebiv/edit?html,css,output" rel="nofollow noopener">Here’s a demo</a>.</strong></h2>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-06-12</div>
          <div class="post_content">
<p>Details is a very specific case where it works right. In this case, like a navigation drawer that slides in from the side of the screen, it doesn’t work. Plus there is no way for a toggle within the drawer to them change the state further without JavaScript.</p>
<p>Details is close, but very limited use cases that are almost all in flow content.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3850_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Malvoz</div>
          <div class="creation_date">2018-06-14</div>
          <div class="post_content">
<p><span class="mention">@Garbee</span></p>
<p>I put this together for you: <a href="https://codepen.io/anon/pen/ERvoPa" rel="nofollow noopener">https://codepen.io/anon/pen/ERvoPa</a></p>
<p>If you’re on google chrome it’ll even look pretty <img alt=":grin:" class="emoji" src="//discourse.wicg.io/images/emoji/twitter/grin.png?v=5" title=":grin:"/></p>
<p>Although CSS toggling would be nice to have, I think a new HTML toggle ability would achieve so much more. Obviously it’d allow styling through CSS anyways. You could toggle HTML attributes, such as <code>open</code>, <code>hidden</code>, <code>inert</code>, <code>aria-*</code>, <code>data-*</code>, <code>class</code> etc.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-06-14</div>
          <div class="post_content">
<aside class="quote no-group" data-post="12" data-topic="2807">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="//discourse.wicg.io/user_avatar/discourse.wicg.io/garbee/40/1137_1.png" width="20"/> Garbee:</div>
<blockquote>
<p>Plus there is no way for a toggle within the drawer to them change the state further without JavaScript.</p>
</blockquote>
</aside>
<p>Very close, but the linchpin for why it doesn’t work is quoted above. The close toggle should be an item within the drawer for accessibility. Plus, it is a common pattern to have a backdrop over the page when a side drawer is displayed so the user’s focus is on that context.</p>
<p>Really, very close but the concept doesn’t hold up once you add all the other needs into the system for a good design that is also accessibly done.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1706_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">textmonster404</div>
          <div class="creation_date">2018-06-15</div>
          <div class="post_content">
<p>Sure, the <code>&lt;details&gt;</code> element is close, but it is a little more buggy.</p>
<p>I wouldn’t use the <code>&lt;details&gt;</code> tag because is not supported in Microsoft Edge and other older browsers.  The only way (as far as I know) to add context or a summary is through the <code>&lt;summary&gt;</code> tag, which has a similar incompatibility problem to the <code>&lt;details&gt;</code> tag.  The <code>&lt;summary&gt;</code> tag also has the problem of Chrome not supporting the <code>list-style</code> CSS property for it.  Chrome instead uses a non-standard pseudo element, <code>::-webkit-details-marker</code>.</p>
<p>Compatibility:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/summary#Browser_compatibility" rel="nofollow noopener">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/summary#Browser_compatibility</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details#Browser_compatibility" rel="nofollow noopener">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details#Browser_compatibility</a></li>
</ul>
<p>I have had cases where I wanted to have the user click on certain text and have it be replaced by other, alternative text to help users understand something if they don’t already.</p>
<p>Example:</p>
<pre><code class="lang-auto">.replace-text-1::after {content: "the London underground,";}
.replace-text-1::after:toggle {content: "a transit system serving London,";}
</code></pre>
<p>Though as you mentioned, <span class="mention">@Malvoz</span>, next to your example you said, “If you’re on google chrome it’ll even look pretty.”  That is also one of my problems. Not everyone is on Google Chrome, so for all of the users not on Google Chrome, your example looks really choppy.  Either more browsers need to pick up on your styles, or we need to make an alternative that is smoother and more versatile.</p>
<p>More HTML tags and attributes is not the solution for that problem in my opinion. After all, HTML wasn’t ever meant to deliver high-end content.  CSS is far more dynamic, but still quick loading for old browsers and mobile devices.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-06-15</div>
          <div class="post_content">
<aside class="quote no-group" data-post="15" data-topic="2807">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="//discourse.wicg.io/user_avatar/discourse.wicg.io/textmonster404/40/1706_1.png" width="20"/> textmonster404:</div>
<blockquote>
<p>I wouldn’t use the <code>&lt;details&gt;</code> tag because is not supported in Microsoft Edge and other older browsers.</p>
</blockquote>
</aside>
<p>Browser support in itself for the element compared to what you want isn’t really relevant. You’re asking for something supported by no one currently. By the time even this gets built and supported, we may very well have details everywhere. MS already says it is a high priority item and they <a href="https://developer.microsoft.com/en-us/microsoft-edge/platform/status/detailssummary/" rel="nofollow noopener">plan to start soon</a> on developing it. So within two or three releases I’d wager we have it.</p>
<p>The summary styling mods are also more “meh” to me. I’ve modified it personally in the past. It is easy to deal with and not a major issue.</p>
<p>The primary point is, having a CSS Toggle system allows for numerous far more versatile designs without scripting. And in the future possibly even more easily accessible systems as well. This helps us (hopefully) reduce the amount of scripting going on which speeds up the web for users on constrained resource devices. Which is a major benefit to a very large chunk of users.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2334_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">liamquin</div>
          <div class="creation_date">2018-06-15</div>
          <div class="post_content">
<p>Adding a new feature because some other feature isn’t supported doesn’t
make much sense. I do agree that using figure/details/summary for a
menu isn’t appropriate either, and that’s a stronger argument to me.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1706_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">textmonster404</div>
          <div class="creation_date">2018-06-16</div>
          <div class="post_content">
<p>Yea, you’re right. Compatibility isn’t the main focus, but CSS togglability can be useful in many scenarios.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2958_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bob</div>
          <div class="creation_date">2020-06-02</div>
          <div class="post_content">
<p>Dunno if anything like this is useful. It’s a bit futuristic, ie. it needs a shift in viewpoint, and would probably need to be a completely separate branch of CSS in the future. But here’s an example of how CSS could potentially be used as a higher-level alternative to JavaScript. There’s a toggle-class command in there somewhere. Those basic things are surprisingly nicer to use in practice than attaching to the page elements via the JS API. I don’t know much about the styling engine, but it would probably need to be a new branch of CSS rather than be part of the existing engine for it to work.</p>
<p><a class="onebox" href="https://activecss.org" rel="nofollow noopener" target="_blank">https://activecss.org</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">jimmyfrasche</div>
          <div class="creation_date">2022-04-09</div>
          <div class="post_content">
<p>This doesn’t seem like it belongs in CSS or HTML but it’s repetitive and verbose to do in JS. It certainly seems like it should be easier.</p>
<p>Maybe there needs to be a new declarative pattern-action language that lets you name some elements by CSS selectors then say things like, “when this event happens to this element and these conditions are met, change these attributes/properties on that element and maybe fire another event”. I think the only other thing it would need to do would be to let you focus elements.</p>
<p>I’m not sure exactly what that would look like but it seems like it could cover a lot of cases more compactly than JS.</p>
<p>It could let you set <code>aria-expanded</code> to its opposite value on a button when it’s clicked and let you focus that button when the menu drawer closes.</p>
<p>It could also let you show a textbox when the Other radio is selected and hide it when not.</p>
<p>CSS can handle the associated presentational changes when the attributes change and if necessary JS can listen to/send custom events or just check the value of attributes.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
