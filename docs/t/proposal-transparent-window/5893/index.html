<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>[Proposal] Transparent window</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Thursday February 08, 2024.</div>
    <h1 class="topic-title">[Proposal] Transparent window</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3853_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">BenjaminAster</div>
          <div class="creation_date">2022-05-26</div>
          <div class="post_content">
<p>I am proposing a way to enable a transparent window background effect for webpages.</p>
<p>More than a week ago, I submitted a proposal to the CSS Working Group (see <a href="https://github.com/w3c/csswg-drafts/issues/7281" rel="noopener nofollow ugc">issue #7281 on the csswg-drafts repo</a>) and got no response, so I want to start a discussion about it here. Depending on how this would get implemented, it might, however, not be the responsibility of the CSSWG at all. The following is the copy-pasted original issue for the CSS Working Group:</p>
<hr/>
<h1>
<a class="anchor" href="#proposal-transparent-window-1" name="proposal-transparent-window-1"></a>Proposal: Transparent window</h1>
<p>Another missing key feature of the web platform in comparison to native applications is the ability to create transparent windows. This <del>issue</del> <ins>discourse</ins> aims to elaborate ideas on possible implementations of transparent windows. The goal is to provide a mechanism on how authors can create a transparent window effect resulting in the following:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="//discourse.wicg.io/uploads/default/e9151a213c62cf35ecc1024a1c45fac3f2db322e" href="//discourse.wicg.io/uploads/default/original/2X/e/e9151a213c62cf35ecc1024a1c45fac3f2db322e.jpeg" title="image"><img alt="image" data-base62-sha1="xfWsClTFNSNCP9fP07wAb8Z6Kxo" data-small-upload="//discourse.wicg.io/uploads/default/optimized/2X/e/e9151a213c62cf35ecc1024a1c45fac3f2db322e_2_10x10.png" height="370" src="//discourse.wicg.io/uploads/default/optimized/2X/e/e9151a213c62cf35ecc1024a1c45fac3f2db322e_2_690x370.jpeg" srcset="//discourse.wicg.io/uploads/default/optimized/2X/e/e9151a213c62cf35ecc1024a1c45fac3f2db322e_2_690x370.jpeg, //discourse.wicg.io/uploads/default/optimized/2X/e/e9151a213c62cf35ecc1024a1c45fac3f2db322e_2_1035x555.jpeg 1.5x, //discourse.wicg.io/uploads/default/optimized/2X/e/e9151a213c62cf35ecc1024a1c45fac3f2db322e_2_1380x740.jpeg 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×1030 426 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Additionally, authors should then be able to, for example, set a transparent <code>background-color</code> and a <code>backdrop-filter: blur()</code> on the <code>:root</code> and/or <code>&lt;body&gt;</code> element to achive an effect like this:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="//discourse.wicg.io/uploads/default/54b0504ca762ec874a516b5f623d0f613d9726d2" href="//discourse.wicg.io/uploads/default/original/2X/5/54b0504ca762ec874a516b5f623d0f613d9726d2.jpeg" title="image"><img alt="image" data-base62-sha1="c5bRbqNHw45MahTCqgRhUJEefzI" data-small-upload="//discourse.wicg.io/uploads/default/optimized/2X/5/54b0504ca762ec874a516b5f623d0f613d9726d2_2_10x10.png" height="370" src="//discourse.wicg.io/uploads/default/optimized/2X/5/54b0504ca762ec874a516b5f623d0f613d9726d2_2_690x370.jpeg" srcset="//discourse.wicg.io/uploads/default/optimized/2X/5/54b0504ca762ec874a516b5f623d0f613d9726d2_2_690x370.jpeg, //discourse.wicg.io/uploads/default/optimized/2X/5/54b0504ca762ec874a516b5f623d0f613d9726d2_2_1035x555.jpeg 1.5x, //discourse.wicg.io/uploads/default/optimized/2X/5/54b0504ca762ec874a516b5f623d0f613d9726d2_2_1380x740.jpeg 2x" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×1032 349 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>An implementation of this feature would allow for a richer and more modern visual experience for users.</p>
<h2>
<a class="anchor" href="#possible-implementation-ideas-2" name="possible-implementation-ideas-2"></a>Possible implementation ideas</h2>
<p>The following are possible ideas on how authors could be able to enable the transparent window effect:</p>
<ul>
<li>A new property in the viewport <code>&lt;meta&gt;</code> tag, e.g. <code>transparent-window=yes</code>.</li>
<li>A new CSS property that is only valid in the <code>:root</code> and/or <code>&lt;body&gt;</code> element, e.g. <code>window-transparency: transparent</code>.</li>
<li>A new Web Application Manifest member, e.g. <code>"transparent_window": true</code>, which would only be applied in the context of a standalone installed Progressive Web App.</li>
</ul>
<h2>
<a class="anchor" href="#privacy-implications-3" name="privacy-implications-3"></a>Privacy implications?</h2>
<p>A key concern here should be that there is no way for the website to view stuff underneath the window. However, since there is no way to read pixel data of the client’s viewport in JavaScript, I do not think there are extra privacy implications to consider here.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3315_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">easrng</div>
          <div class="creation_date">2022-06-13</div>
          <div class="post_content">
<p>If you know what the user’s wallpaper is you can fake this by checking the window position and size. Try setting your wallpaper to <a href="https://cdn.glitch.global/43e0e3d5-0ff6-4cc5-b98e-5519f1bd0881/wallpaper.jpg?v=1653403310871" rel="noopener nofollow ugc">the default windows 7 one</a> and loading <a href="https://progress-page.glitch.me/" rel="noopener nofollow ugc">https://progress-page.glitch.me/</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3853_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">BenjaminAster</div>
          <div class="creation_date">2022-06-13</div>
          <div class="post_content">
<p>Alright, but</p>
<ul>
<li>normally, you don’t know the user’s background</li>
<li>you don’t see other opened windows behind your current window (see example screenshots)</li>
<li>this solution feels slow and unresponsive</li>
</ul>
<p>I think it’s very clear that this is not a replacement for my original idea.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3543_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">alinnert</div>
          <div class="creation_date">2022-06-15</div>
          <div class="post_content">
<p>I had a similar idea recently: What if we were able to use system level materials on individual elements just like native applications do that. E.g.:</p>
<pre><code class="lang-auto">.sidebar {
  background-material: blur;
}
</code></pre>
<p>I don’t think <code>background-image</code> works because the result of <code>background-material</code> does depend on the window position. Also, background-material could accept a list of values where the first available material gets applied (similar to <code>font-family</code>). I think that’s a good idea since every system has its own set of unique materials. Many do have some kind of blurry transparency, but (I think) only Windows has something like Mica (a blurry version of the desktop wallpaper). In that case we could write <code>background-material: win-mica, blur;</code>. This uses <code>win-mica</code> if available, and <code>blur</code> otherwise.</p>
<p>That is unless we can agree on a standardized set of materials that work across all operating systems. And I think some materials even have additional settings (blur strength, tint color, …). Those should probably also be adjustable.</p>
<p>A fully transparent window could be one of these materials (e.g. <code>background-material: transparent;</code>).</p>
<p>I just don’t know if that’s so easy to implement or if that requires some heavy hacking to get this to work.</p>
<p>Also, I think this should only work in PWAs that run in their own window. In a browser context this can be very confusing and could potentially be used maliciously: Imagine a transparent website on top of another application. The user thinks they interact with the application unerneath but in reality the malicious website gets all the user inputs etc.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/302_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">tabatkins</div>
          <div class="creation_date">2022-06-16</div>
          <div class="post_content">
<p>Privacy concerns are indeed moot. (There <em>are</em> timing-channel attacks you can do with compositing if you can force compositing against a particular layer, but we’d obviously treat the browser window itself as isolated, so you can’t do special composites against anything behind it.)</p>
<p>But <em>security</em> concerns are extremely important here - if you can make the window transparent you can trick people into clicking things when they think they’re clicking on their desktop or whatever. This isn’t something arbitrary web content should be able to invoke.</p>
<p>That said, CSS doesn’t care what color the background canvas is; it recommends white/black, but allows the UA to decide. The UA can definitely provide a transparent canvas, just like it does for iframes, so this sort of thing would be possible to invoke via manifest for installed webapps, for example. It’s just not something for CSS <em>itself</em> to control.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3853_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">BenjaminAster</div>
          <div class="creation_date">2022-06-17</div>
          <div class="post_content">
<p>To prevent the website from tricking the user into thinking they are interacting with another application, the user agent could maybe provide blurring out-of-the-box. For example, one could specify <code>"transparent_background_blur": &lt;number&gt;</code> in the PWA manifest. The number would be the blur radius in pixels. The user agent could then decide that a minimum blur radius of e.g. 20 pixels is required, so it would take the maximum of 20 and the given number. To make the background darker (like in my second example image), you could then still specify a semitransparent CSS <code>background-color</code> on <code>&lt;body&gt;</code>. This way, the cool-looking effect that I was aiming for would be possible while still providing the right security measures.</p>
<p>I also like the idea of <span class="mention">@alinnert</span>, but I don’t think this would be easy to implement for browser vendors. Mixing native materials into the browser-rendered canvas doesn’t seem like a straightforward task.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
