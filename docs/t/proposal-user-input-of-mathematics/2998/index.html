<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>[Proposal] User Input of Mathematics</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Thursday February 08, 2024.</div>
    <h1 class="topic-title">[Proposal] User Input of Mathematics</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AdamSobieski</div>
          <div class="creation_date">2018-09-03</div>
          <div class="post_content">
<h2>Introduction</h2>
<p>Mathematics user input is an important topic. Mathematics user input facilitates scholarly and scientific communication scenarios as well as educational scenarios, providing new varieties of science, technology, engineering and mathematics exercises and activities.</p>
<p>To provide users with accessible mathematics user input, Web browser software applications could invoke operating system platform or third-party components and services. This resembles the way that touchscreen keyboards and handwriting recognition are provided on tablet computers.</p>
<p>Three varieties of components and services for mathematics user input are presently considered. Firstly, graphical user interface widgets with panels of buttons for entering mathematical notations. Secondly, mathematics handwriting recognition components and services. Thirdly, mathematics speech recognition components and services.</p>
<h2>Input Elements for Mathematics</h2>
<pre><code class="lang-xml">
&lt;input type="math" /&gt;

&lt;matharea /&gt;

</code></pre>
<h2>Hyperlinks</h2>
<p><a class="onebox" href="https://www.w3.org/community/exercises-and-activities/wiki/User_Input_of_Mathematics" target="_blank">https://www.w3.org/community/exercises-and-activities/wiki/User_Input_of_Mathematics</a>
<aside class="onebox githubissue">
<header class="source">
<a href="https://github.com/w3c/html/issues/1611" rel="nofollow noopener" target="_blank">github.com/w3c/html</a>
</header>
<article class="onebox-body">
<a href="https://github.com/AdamSobieski" rel="nofollow noopener">
<img class="thumbnail onebox-avatar" height="420" src="https://avatars1.githubusercontent.com/u/1072800?v=2&amp;s=96" width="420"/>
</a>
<h4><a href="https://github.com/w3c/html/issues/1611" rel="nofollow noopener" target="_blank">Issue: User Input of Mathematics</a></h4>
<div class="date" style="margin-top:10px;">
<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/AdamSobieski" rel="nofollow noopener" target="_blank">AdamSobieski</a>
	on <a href="https://github.com/w3c/html/issues/1611" rel="nofollow noopener" target="_blank">2018-08-22</a>
</div>
<div class="user">
</div>
</div>
<pre class="content" style="white-space: pre-wrap;">I'd like to share some ideas from the Educational Exercises and Activities Community Group. The ideas pertain to the user input...</pre>
<div class="labels">
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1990_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Crissov</div>
          <div class="creation_date">2018-09-04</div>
          <div class="post_content">
<p>There are other scientific notations that would benefit from dedicated input modes. Some of them are reasonable to combine, e. g. physics and chemistry formulae are often covered by the proposed <code>math</code>, but those sciences also have very specific requirements in some subfields. You should assert and document what kind of input methods already exist, e.g. in MS Office, and what would be required or even possible (re MathML, Unicode etc.).</p>
<p>By the way, I also see use cases for emoji and IPA input methods that are also independent of language.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AdamSobieski</div>
          <div class="creation_date">2018-09-07</div>
          <div class="post_content">
<p><span class="mention">@Crissov</span> , thank you. I agree that, in addition to mathematics, sciences such as physics and chemistry would also benefit from new and standardized user input technology.</p>
<p>To your question, in Microsoft Office, the formats of UnicodeMath, LaTeX, OMML and MathML are supported. At some point upcoming, math braille or Nemeth braille will also be supported.</p>
<p>I’m presently inclined to utilize MathML.</p>
<p>What I’m hoping to do is to incubate this proposal so that it might become a new deliverable of the <a href="https://www.w3.org/WebPlatform/WG/">Web Platform Working Group</a>.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AdamSobieski</div>
          <div class="creation_date">2018-09-09</div>
          <div class="post_content">
<p>It’s presently a good time to propose and to discuss new deliverables for the Web Platform Working Group [1].</p>
<p>I’m excited about this proposal. The user input of mathematical and scientific notations can advance scholarly and scientific communication as well as science, technology, engineering and mathematics educational exercises and activities.</p>
<p>I would like to request comments and feedback from implementers. Thank you.</p>
<h2>References</h2>
<p>[1] <a href="https://lists.w3.org/Archives/Public/public-webapps/2018JulSep/0025.html">https://lists.w3.org/Archives/Public/public-webapps/2018JulSep/0025.html</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Daniel_Marques_WIRIS</div>
          <div class="creation_date">2018-09-10</div>
          <div class="post_content">
<p>Not against the math value. But the following issues should also be resolved:</p>
<ol>
<li>
<p>First a clarification of what math is. More precisely, choose a format: MathML, LaTeX, AsciiMath, … Arguably, the most “standard” is MathML.</p>
</li>
<li>
<p>A “baseline” behaviour of the control should be specified in order to provide browser compatibility. For example a type=“text” has a very precise baseline behaviour: “a rectangle where text can be placed inside and when the text is bigger than the rectangle, bla bla bla” . Then, specific browses and devices improves the UX while keeping a common compatibility.</p>
</li>
<li>
<p>UI choice: equation (or formula) editors usually have a toolbar with the available math templates. Such toolbars are different in size from one solution to another. But the important decision is whether the UI will be implemented by the browser/device or be the Web page the responsible (that’s something like the HTML editors where the browser implements the raw edition capatility and a the toolbar menu needs a library like TinyMCE, CKEditor, etc.).</p>
</li>
<li>
<p>Is the target level relevant? primary, secondary, highschool, algebra, analysis, group theory, …
Not clear that a single and generic UI for math is good for all. Browsers might have hard time to provide the solution that is best for the student without any explicit hint. For example, there is not point to offer a handwriting input method that is not able to input matrices if the exepected result is to write the inverse of a given matrix.</p>
</li>
<li>
<p>Being a litle bit picky myself, math is more than just equations and formulas. What about graphics?</p>
</li>
</ol>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AdamSobieski</div>
          <div class="creation_date">2018-09-11</div>
          <div class="post_content">
<p><span class="mention">@Daniel_Marques_WIRIS</span>,</p>
<h2>Mathematics Formats</h2>
<blockquote>
<p>First a clarification of what math is. More precisely, choose a format: MathML, LaTeX, AsciiMath, … Arguably, the most “standard” is MathML.</p>
</blockquote>
<p>I’m inclined to first consider MathML. Interestingly, MathML can <a href="https://www.w3.org/TR/MathML3/chapter5.html">include other formats as annotation</a>.</p>
<h2>Scenarios</h2>
<blockquote>
<p>A “baseline” behaviour of the control should be specified in order to provide browser compatibility. For example a type=“text” has a very precise baseline behaviour: “a rectangle where text can be placed inside and when the text is bigger than the rectangle, bla bla bla” . Then, specific browses and devices improves the UX while keeping a common compatibility.</p>
</blockquote>
<p>There are three scenarios to consider:</p>
<h3><code>&lt;input type="math" /&gt;</code></h3>
<p>Some complexity arises as we consider the <a href="https://w3c.github.io/html/sec-forms.html#the-input-element" rel="nofollow noopener"><code>HTMLInputElement</code></a> interface which utilizes strings for certain properties which we would like to hold MathML content. That is, the <code>HTMLInputElement</code> interface is presently defined with the type <code>DOMString</code> for the properties <code>placeholder</code>, <code>defaultValue</code> and <code>value</code>.</p>
<p>We could explore solutions including, but not limited to: (1) generalizing those properties’ types to the type <code>object?</code>, (2) adding properties resembling <code>object? valueAsMath</code> based upon the <a href="https://w3c.github.io/html/sec-forms.html#dom-htmlinputelement-valueasdate" rel="nofollow noopener"><code>object? valueAsDate</code></a> property.</p>
<h3><code>&lt;matharea /&gt;</code></h3>
<p>Less complexity arises as we consider creating an entirely new interface, <code>HTMLMathAreaElement</code> based upon the <a href="https://w3c.github.io/html/sec-forms.html#the-textarea-element" rel="nofollow noopener"><code>HTMLTextAreaElement</code></a> interface.</p>
<h3><code>contenteditable</code></h3>
<p>Discussion topics include a JavaScript API to invoke users’ mathematics user input components or services. When the user double-clicks on a mathematics expression in a <code>contenteditable</code> region, the browser can open a mathematics user input widget provided by the website, the browser, the platform or a third-party component or service. These widgets could also be invoked via JavaScript.</p>
<p>It is important to note that we could be discussing standardization of, for <code>contenteditable</code> scenarios, the <em>double-click on mathematics expression opens user input widget behavior</em> as opposed to user experiences where the caret or text cursor moves into and through mathematics expressions as we might observe in some computer algebra systems.</p>
<p><a href="https://w3c.github.io/input-events/index.html#interface-InputEvent" rel="nofollow noopener">Input Events Level 2</a> utilizes a <code>DataTransfer</code> interface so we can transport, beyond text, MathML content in the input events system.</p>
<p>Interestingly, the <a href="http://w3c.github.io/editing/contentEditable.html" rel="nofollow noopener">Editing APIs</a> are hosted by the Web Platform Working Group, specifically by <a href="http://w3c.github.io/editing/" rel="nofollow noopener">The Editing Taskforce</a>.</p>
<h3>Implementing Mathematics User Input in Website JavaScript versus Utilizing Platform / Browser / Third-party Components or Services</h3>
<blockquote>
<p>UI choice: equation (or formula) editors usually have a toolbar with the available math templates. Such toolbars are different in size from one solution to another. But the important decision is whether the UI will be implemented by the browser/device or be the Web page the responsible (that’s something like the HTML editors where the browser implements the raw edition capatility and a the toolbar menu needs a library like TinyMCE, CKEditor, etc.).</p>
</blockquote>
<p>With standardized mathematics user input document elements (e.g. <code>&lt;input type="math" /&gt;</code>, <code>&lt;matharea /&gt;</code>), operating systems could ship with mathematics user input widgets (resembling virtual keyboards), browsers could ship with default widgets, and there should also be third-party browser extensions as well as third-party native components and services utilizable by the browser applications. Reasons that users might prefer third-party components include accessibility features.</p>
<p>In addition to graphical user interface widgets, mathematics handwriting recognition and mathematics speech recognition solutions could be invoked when users double-click on mathematics expressions. Some components and services might provide multiple such input modalities.</p>
<p>To provide for website-based solutions for mathematics user input, we could allow browser settings which permit pages to override of the default behavior, e.g. with a callback function. If a user setting is such that overriding the default behavior is permitted, a page could provide a callback function to be called when the user double-clicks on a mathematics expression.</p>
<h3>Providing Hints to Recognition Technology</h3>
<blockquote>
<p>Is the target level relevant? primary, secondary, highschool, algebra, analysis, group theory, … Not clear that a single and generic UI for math is good for all. Browsers might have hard time to provide the solution that is best for the student without any explicit hint. For example, there is not point to offer a handwriting input method that is not able to input matrices if the exepected result is to write the inverse of a given matrix.</p>
</blockquote>
<p>I opened a proposal for <a href="https://discourse.wicg.io/t/proposal-document-element-metadata/3019">document element metadata</a> which is one approach to providing hints for mathematics recognition.</p>
<p>Presently, there are four types of mathematics recognition hints to consider for graphical user interface, handwriting and speech recognition scenarios. Firstly, there is the category or subject of input; this could be the variety of scientific notation expected, e.g. chemistry, or the variety of mathematics expected. Secondly, there are the symbols expected, e.g. “x” or “chi”, “w” or “omega”. Thirdly, entire expressions, expected user input content, can be provided as hints. Fourthly, templates can be provided, mathematical expressions with blanks, e.g. for fill-in-the-blank user experiences.</p>
<p>As interesting, there is also some content on these topics available at <a href="https://www.w3.org/community/exercises-and-activities/wiki/User_Input_of_Mathematics#Mathematics_Recognition_Hints:_A_Metadata-based_Approach">the wiki of the Educational Exercises and Activities Community Group</a>.</p>
<h2>MathJax Interoperability</h2>
<p>We should consider MathJax interoperability with respect to the baseline behavior of the controls in the three scenarios aformementioned, <code>&lt;input type="math" /&gt;</code>, <code>&lt;matharea /&gt;</code> and <code>contenteditable</code>.</p>
<h2>Mathematics and Graphics</h2>
<blockquote>
<p>Being a litle bit picky myself, math is more than just equations and formulas. What about graphics?</p>
</blockquote>
<p>Excellent idea. I wonder how this could be implemented? Should the drawing / graphical composition widget export <a href="https://www.w3.org/TR/InkML/">InkML</a>, <a href="https://www.w3.org/TR/SVG2/">SVG</a> or graphics formats? We could also utilize the <code>DataTransfer</code> interface in a JavaScript API.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1990_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Crissov</div>
          <div class="creation_date">2018-09-13</div>
          <div class="post_content">
<p>I believe a lot of the simpler use cases would be covered by setting the input language to be <em>neutral</em>, <em>undefined</em> or <em>unknown</em> with a subtag that would make the browser recognize or offer a specific subset of Unicode characters.</p>
<pre><code class="lang-auto">&lt;input type="text" lang="x-math"&gt;
&lt;input type="text" lang="und-ipa"&gt;
&lt;input type="text" lang="zxx-particle-physics"&gt;
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AdamSobieski</div>
          <div class="creation_date">2018-09-13</div>
          <div class="post_content">
<p><span class="mention">@Crissov</span>,</p>
<p>Thank you. In addition to:</p>
<pre><code class="lang-xml">&lt;input type="text" lang="x-math"&gt;
&lt;input type="text" lang="und-ipa"&gt;
&lt;input type="text" lang="zxx-particle-physics"&gt;
</code></pre>
<p>we could consider something like:</p>
<pre><code class="lang-xml">&lt;input type="text" lang="x-latex"&gt;
</code></pre>
<p>and also possible is:</p>
<pre><code class="lang-xml">&lt;input type="text" inputmode="math" /&gt;
</code></pre>
<p>however, the <code>inputmode</code> attribute is controversial.</p>
<h2>AMS-LaTeX and MathJax</h2>
<p>Some desirable features are possible with text-based mathematics input, e.g. AMS-LaTeX, libraries such as <a href="https://www.mathjax.org/" rel="nofollow noopener">MathJax</a> and perhaps a new JavaScript API for accessing external mathematics editors provided by operating systems, browsers and/or third-party vendors.</p>
<p>With a text-based input of ASCIIMath or AMS-LaTeX, libraries such as MathJax can produce displayable mathematics for users. This resembles the functionality shown on <a href="https://www.mathjax.org/#demo" rel="nofollow noopener">the MathJax front page</a>.</p>
<p>Users could type AMS-LaTeX into text-based <code>&lt;input&gt;</code> elements and libraries such as MathJax could, upon completion of typing, render the resultant mathematics such that it were positioned where the <code>&lt;input&gt;</code> element would otherwise be. MathJax could also make it so that users could click on displayed mathematics to reveal text-based <code>&lt;input&gt;</code> elements with which to edit AMS-LaTeX content.</p>
<p>MathJax could also provide expected functionality for <code>placeholder</code> attributes.</p>
<h2>JavaScript API</h2>
<p>Students don’t know AMS-LaTeX – only expert users know AMS-LaTeX. Accordingly, we want to encapsulate the formats to be utilized by the underlying <code>&lt;input&gt;</code> elements and to provide users with desired user experiences.</p>
<p>In my opinion, desired user experiences are for users to select <code>&lt;input&gt;</code> elements to open and utilize external mathematics editors. Desired user experiences for such editors are to enter mathematics via mouse and keyboard, handwriting recognition and/or speech recognition. Desired user experiences include rendered mathematics appearing in documents confirming the processing of their user input. Desired user experiences include clicking on rendered mathematics expressions to edit them in an external mathematics editor.</p>
<p>With a JavaScript API for accessing external mathematics editors, libraries such as MathJax could utilize external mathematics editors to provide desired user experiences.</p>
<h2>MathML</h2>
<p>The desired user experiences entirely encapsulate the formats to be utilized. That is, end users needn’t encounter either AMS-LaTeX or MathML. Forms data, however, will either be text-based, e.g. AMS-LaTeX, or MathML data. For discussion purposes, I will argue that MathML is the way to go.</p>
<h3>Mathematical Semantics</h3>
<p>MathML includes presentational and semantic content. We can consider scenarios where forms data or <code>contenteditable</code> content are desired to include mathematics semantic content. This mathematics semantic content can be provided by external mathematics editors, perhaps utilizing contextual recognition hints.</p>
<p><a href="http://lurchmath.org/" rel="nofollow noopener">Lurch</a> is an example of a software which utilizes mathematics semantics. As an aside, we can envision, beyond a green / yellow / red light pattern on mathematics expressions, an information / warning / error pattern on mathematics expressions in mathematical proofs or perhaps on natural language sentences in argumentation.</p>
<h3>MathML is Standard</h3>
<p>Beyond being the most standard option, MathML is HTML5. There should be some means of inputting it in forms and some means of utilizing it with <code>contenteditable</code>.</p>
<h2>Conclusion</h2>
<p>In the event that there comes to be a Web Platform Working Group deliverable for mathematics user input, there will probably be <em>AMS-LaTeX vs. MathML</em> discussions and deliberations.</p>
<p>There will also probably be discussions and deliberations regarding a JavaScript API for opening external mathematics editors provided by operating systems, browsers or third-party vendors, providing them with contextual recognition hints, and obtaining the data, expressions and graphics, provided by them in multiple formats (e.g. <a href="http://w3c.github.io/html/editing.html#the-datatransfer-interface" rel="nofollow noopener"><code>DataTransfer</code></a>).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AdamSobieski</div>
          <div class="creation_date">2018-09-18</div>
          <div class="post_content">
<p>Is there any interest in opening a GitHub repository, perhaps a WICG repository, and starting on some documents with respect to:</p>
<ol>
<li>
<p>Mathematical and notational user input scenarios pertaining to forms and to <code>contenteditable</code> content</p>
</li>
<li>
<p>Hypertext document markup for providing users with mathematical and notational user input</p>
</li>
<li>
<p>A JavaScript API for utilization of and interoperation with mathematical and notational user input controls provided by websites, browsers, operating system platforms and third-party software vendors, providing such user input controls with contextual recognition hints and obtaining resultant data, expressions and graphics</p>
</li>
</ol>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2421_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">marcosc</div>
          <div class="creation_date">2018-10-09</div>
          <div class="post_content">
<p>Thanks for this proposal, Adam. I think I’d like to see three things before we open a WICG repo:</p>
<ol>
<li>an implementation as a web component - and proof that web components are too limited to meet the use cases (i.e., further browser support is needed).</li>
<li>interest from at least one browser vendor.</li>
<li>demonstrated demand from developer community.</li>
</ol>
<p>General questions…</p>
<blockquote>
<p>Three varieties of components and services for mathematics user input are presently considered. Firstly, graphical user interface widgets with panels of buttons for entering mathematical notations.</p>
</blockquote>
<p>Do OSs already provide these widget? Generally, browsers rely on OSs to provide these inputs natively.</p>
<blockquote>
<p>Secondly, mathematics handwriting recognition components and services.</p>
</blockquote>
<p>As above with regards to OSs providing these? - or could these be done inside the web app through an existing API.</p>
<blockquote>
<p>Thirdly, mathematics speech recognition components and services.</p>
</blockquote>
<p>As above.</p>
<p>Additionally, is there some relationship to MathML?</p>
<p>I would suggest starting a separate community group around this, and building up a community. Once you have a working implementation that is in wide use, you should bring the proposal back.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
