<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>setTimeout implemented with requestAnimationFrame</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Saturday February 24, 2024.</div>
    <h1 class="topic-title">setTimeout implemented with requestAnimationFrame</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2910_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trusktr</div>
          <div class="creation_date">2016-03-23</div>
          <div class="post_content">
<p>I’ve been experimenting with an idea in order to play well with graphic performance: <a href="http://npmjs.com/raf-timeout" rel="nofollow noopener">http://npmjs.com/raf-timeout</a></p>
<p>I think it’s a good idea for performance, and it will work with most apps (as long as they have rAF). In rare cases, an app might need setTimeout or setInterval to fire exactly as expected, but for most apps, the -+16ms inaccuracy introduced by using requestAnimationFrame is negligible.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/913_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">MT</div>
          <div class="creation_date">2016-03-24</div>
          <div class="post_content">
<p>Assuming display’s refresh rate is always 60 Hz is probably a dead-end road since the rate may actually be different — e. g. 50, or 75, or 120, or 144 Hz, or any else — according to what the specific display is capable of.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2910_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trusktr</div>
          <div class="creation_date">2016-03-24</div>
          <div class="post_content">
<p>Well, the idea is that, for most code, the refresh rate doesn’t really matter. Usually, timeouts are approximate. If the refresh rate is higher than 60hz, then it only means the timeout will be more accurate. In my use cases, I think the benefit with respect to graphics outweighs the loss of accuracy (or is it precision?).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/302_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">tabatkins</div>
          <div class="creation_date">2016-03-24</div>
          <div class="post_content">
<p>Yeah, using a timeout function that’s as responsive to browser workload as possible is ideal. You’re right that most of the time a rAF is acceptable; you should also look into <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback">requestIdleCallback</a> for when your latency needs are even lower.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
