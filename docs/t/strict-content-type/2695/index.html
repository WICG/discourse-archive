<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Strict-Content-Type</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Thursday February 08, 2024.</div>
    <h1 class="topic-title">Strict-Content-Type</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SoniEx2</div>
          <div class="creation_date">2018-04-07</div>
          <div class="post_content">
<p>Content-Type, also known as MIME type, lets you specify the data type of the content.</p>
<p>Strict-Content-Type: true should force the Content-Type to be used strictly. This disables browsers guessing the content type for e.g. images and video, as many of them do.</p>
<p>(For example <a href="https://ftb.cursecdn.com/FTB2/static/FTBPresentsCrackpackIcon.png" rel="nofollow noopener">https://ftb.cursecdn.com/FTB2/static/FTBPresentsCrackpackIcon.png</a> is a JPEG served as an image/png. This would be disallowed with Strict-Content-Type)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/658_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AshleyScirra</div>
          <div class="creation_date">2018-04-08</div>
          <div class="post_content">
<p>Isn’t this what the <code>nosniff</code> content type option does?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SoniEx2</div>
          <div class="creation_date">2018-04-08</div>
          <div class="post_content">
<p>nosniff was explicitly designed to not break images.</p>
<p>strict-content-type was explicitly designed to break images.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-04-08</div>
          <div class="post_content">
<p>What use-case is your recommendation aiming to solve?</p>
<p>Developers generally aren’t great about setting the proper mime types. Nor are the applications they use. Browser inference here benefits the end user experience. So what is the use-case that requires a new strict mode to solve?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SoniEx2</div>
          <div class="creation_date">2018-04-09</div>
          <div class="post_content">
<p>Strict-Content-Type is to nosniff/Content-Type what XHTML is to HTML.</p>
<p>It’s meant to explicitly shout at the developer, at the expense of the end-user, just like XHTML. It also makes processing easier for automated tools, just like XHTML.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-04-12</div>
          <div class="post_content">
<p>That’s just a comparison of technologies, not an actual use case. A use case is something to the effect of “I am experiencing $X issue which currently can’t be worked around. Having this feature added would alleviate this problem.”</p>
<p>Unless there are clearly visible problems that is being caused by not having strictness, it’s highly unlikely any browser is going to want to put effort into adding it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SoniEx2</div>
          <div class="creation_date">2018-04-12</div>
          <div class="post_content">
<p>The point is that mismatched content type breaks many automated tools.</p>
<p>By being strict about it, you can also break browsers while at it. This is a good thing in many cases because it promotes better compatibility - your content is gonna show up the same whether in a browser or in a minecraft launcher.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-04-13</div>
          <div class="post_content">
<p>Well, as discussed earlier, from the sound of it <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options" rel="nofollow noopener">nosniff</a> in the content header options is what you’re looking for. At least for stylesheets and scripts. However, applying this to images broke web sites. So, that application isn’t going to be applied in the web.</p>
<p>Without a specific use-case though, not much is possible.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SoniEx2</div>
          <div class="creation_date">2018-04-13</div>
          <div class="post_content">
<p>The use case is to break the website if you have your type-safety wrong.</p>
<p>It’s strongly typed websites. We use strongly typed languages, why shouldn’t we have strongly typed websites?</p>
<p>I want my website to give a compile error if the types are wrong/mismatched. That is exactly what this is for.</p>
<p>That’s what nosniff is missing. nosniff is just a security feature, this is a… something else.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2334_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">liamquin</div>
          <div class="creation_date">2018-04-14</div>
          <div class="post_content">
<p>We did try that in early Web days. NCSA Mosaic had a “bad html” icon
that would light up if there were syntax errors (which turned out to be
true on almost all pages) and offered to email the Webmaster to let
them know, if that metadata was present.</p>
<p>It’s already, strictly speaking, a violation of HTTP to serve up
content that doesn’t match its corresponding MIME media type. Adding a
new HTTP header isn’t going to change that and isn’t going to change
the fact that it hurts the wrong people - the users, who blame the
browser, rather than the authors and developers.</p>
<p>You’re better off using a validation service, i’d say.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SoniEx2</div>
          <div class="creation_date">2018-04-14</div>
          <div class="post_content">
<p>then make a compromise: strict types for hotlinking, guessing for <code>&lt;img&gt;</code> tags?</p>
<p>this gives a slightly-inconsistent-enough behaviour that users will know it’s the developer’s fault. some users will assume the website is broken while others will just assume the website doesn’t support hotlinking.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1137_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Garbee</div>
          <div class="creation_date">2018-04-14</div>
          <div class="post_content">
<aside class="quote" data-post="9" data-topic="2695">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="//discourse.wicg.io/letter_avatar_proxy/v2/letter/s/898d66/40.png" width="20"/> SoniEx2:</div>
<blockquote>
<p>nosniff is just a security feature</p>
</blockquote>
</aside>
<p>It is <strong>absolutely</strong> not a security feature. It’s a feature so a site can serve static file without risking them being hot-linked as resources to be used in a website. For example, you can’t hotlink github’s raw content from repositories as a style or script src on your website. It has nothing to do with a site’s security. It’s all about a site being able to offer a service without having their service abused by users.</p>
<p>If you are worried about other places using your server’s resources as content for themselves, there are already ways of handling that in your web server config. Checking the origin of the request and denying it if you don’t recognize it. There is absolutely no need for a new strict mode to have anything to do with hotlink prevention.</p>
<aside class="quote" data-post="11" data-topic="2695">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="//discourse.wicg.io/letter_avatar_proxy/v2/letter/s/898d66/40.png" width="20"/> SoniEx2:</div>
<blockquote>
<p>users will know it’s the developer’s fault</p>
</blockquote>
</aside>
<p>It’s not as easy as just saying they’ll know, and boom they’ll know. In reality, most users have no idea what’s going on so they blame the closest thing to them, the browser. Because that’s what they understand to some degree.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SoniEx2</div>
          <div class="creation_date">2018-04-14</div>
          <div class="post_content">
<p>nosniff is so text files don’t get treated like .exe files or w/e, e.g. because the file upload on your website is a bit risky.</p>
<p>remember when you had to validate everything on the server, because we didn’t have nosniff?</p>
<p>nowadays things are much easier. we still do server-side validation, but it’s not as strictly necessary as it once was.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
