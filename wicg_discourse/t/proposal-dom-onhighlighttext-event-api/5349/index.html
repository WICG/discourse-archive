<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>[Proposal] DOM onhighlighttext Event API</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  
  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="66" alt="WICG" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">A partial archive of discourse.wicg.io as of Thursday February 08, 2024.</div>
    <h1 class="topic-title">[Proposal] DOM onhighlighttext Event API</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3534_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">fauzan121002</div>
          <div class="creation_date">2021-06-01</div>
          <div class="post_content">
<p>I suggest to add a new event in the Javascript DOM, namely onhighlighttext.</p>
<p>Example :</p>
<pre><code class="lang-auto">document.addEventListener("onhighlighttext", function(){
  alert("wow you highlighted me sir!");
});
</code></pre>
<p>Actually we can do this with getSelection by onmouseup or keyup , but it ends up with a syntax that is not neat and hard to read.</p>
<pre><code class="lang-auto">var t = "";
function gText(e) {
    t = (document.all) ? document.selection.createRange().text : document.getSelection();
    document.getElementById('input').value = t;
}

document.onmouseup = gText;
if (!document.all) document.captureEvents(Event.MOUSEUP);
</code></pre>
<p>Besides that we can use selectionchange, but selectionchange as the latter fires so many events (up to the chars selected), you have to wait some arbitrary period to get the final selection.</p>
<p>I canâ€™t find any ideas and proposals about this.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3534_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">fauzan121002</div>
          <div class="creation_date">2021-06-01</div>
          <div class="post_content">
<p>Move from <a href="https://es.discourse.group/t/onhighlighttext/805" rel="noopener nofollow ugc">here</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1597_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">tomayac</div>
          <div class="creation_date">2021-06-08</div>
          <div class="post_content">
<p>Looks like this is better discussed in the context of a <a href="https://github.com/w3c/csswg-drafts/labels/css-highlight-api-1" rel="noopener nofollow ugc">new Issue</a> for the <a href="https://drafts.csswg.org/css-highlight-api-1/" rel="noopener nofollow ugc">CSS Custom Highlight API Module Level 1</a>.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>
